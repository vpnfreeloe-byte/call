<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>محاكاة اتصال سامسونج</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            background-color: #1c1c1e;
        }
        
        .phone-container {
            width: 100%;
            height: 100%;
            background: white; 
            overflow: hidden;
            position: relative;
        }
        
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: opacity 0.3s ease;
            box-sizing: border-box;
            color: white; 
        }
        
        /* === هذا هو السطر الذي تم تصحيحه === */
        /* الآن أي عنصر لديه كلاس "hidden" سيختفي */
        .hidden {
            display: none !important; 
        }
        
        #setup-screen {
            background: white;
            padding: 30px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            color: black; 
        }
        #setup-screen h3 { margin-top: 0; }
        #setup-screen input {
            display: block; width: 90%; padding: 12px;
            margin: 10px auto; border: 1px solid #ccc;
            border-radius: 5px; font-size: 16px;
        }
        #setup-screen button {
            background-color: #007bff; color: white; padding: 12px 20px;
            border: none; border-radius: 5px; cursor: pointer;
            font-size: 16px; margin-top: 10px;
        }
        
        #countdown-screen {
            background-color: #1c1c1e;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
        }
        #countdown-timer { font-size: 28px; font-weight: bold; }
        #countdown-message { font-size: 18px; color: #aaa; margin-top: 10px; }
        
        #call-screen {
            background-color: #1c1c1e;
            display: flex; flex-direction: column;
            justify-content: space-between; padding: 40px 20px;
        }
        .caller-info { text-align: center; padding-top: 60px; }
        .avatar {
            width: 100px; height: 100px; background-color: #555;
            border-radius: 50%; margin: 0 auto 20px; display: flex;
            justify-content: center; align-items: center;
            font-size: 50px; color: #ccc;
        }
        #caller-name, #in-call-name { font-size: 28px; font-weight: bold; margin: 0; }
        #caller-number, #in-call-number { font-size: 18px; color: #aaa; margin: 5px 0 0 0; }
        .call-status { font-size: 16px; color: #4CAF50; margin-top: 15px; }
        
        .action-buttons { display: flex; justify-content: space-around; align-items: center; padding-bottom: 40px; }
        .action-btn {
            width: 70px; height: 70px; border-radius: 50%; border: none;
            cursor: pointer; display: flex; justify-content: center;
            align-items: center; font-size: 30px; color: white;
            transition: transform 0.2s;
        }
        .action-btn:active { transform: scale(0.9); }
        .reject { background-color: #e61919; transform: rotate(135deg); }
        .answer { background-color: #00c853; }

        /* 4. شاشة المكالمة الجارية */
        #in-call-screen {
            background: linear-gradient(to bottom, #2c3e50, #1c1c1e);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 40px 20px;
        }
        
        #call-timer {
            font-size: 18px;
            color: #aaa;
            text-align: center;
            margin-top: 5px;
        }

        .in-call-buttons-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px; 
            padding: 0 20px;
            margin-top: 40px;
        }

        .grid-btn {
            background-color: #3a3a3c;
            border-radius: 50%;
            width: 70px;
            height: 70px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            border: none;
            cursor: pointer;
            margin: 0 auto; 
            font-size: 24px;
        }
        .grid-btn span { font-size: 12px; margin-top: 5px; }

        .end-call-container {
            display: flex;
            justify-content: center;
            align-items: center;
            padding-bottom: 40px;
        }
        
        #end-call-btn-in-call {
            width: 70px; height: 70px; background-color: #e61919;
            color: white; border-radius: 50%; border: none;
            font-size: 30px; cursor: pointer; transform: rotate(135deg); 
        }
        
        /* 5. تصميم لوحة المفاتيح */
        #keypad-screen {
            padding: 0 20px;
            margin-top: 40px;
            text-align: center;
        }
        .keypad-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            max-width: 280px;
            margin: 0 auto;
        }
        .keypad-btn {
            background-color: #3a3a3c;
            border-radius: 50%;
            width: 70px;
            height: 70px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 28px;
            font-weight: 300;
        }
        .keypad-btn span {
            font-size: 10px;
            font-weight: 600;
            letter-spacing: 1px;
            color: #aaa;
            margin-top: 0;
        }
        #hide-keypad-btn {
            background: none;
            border: none;
            color: #007aff;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }
        
    </style>
</head>
<body>

    <div class="phone-container">

        <div id="setup-screen" class="screen">
            <h3>إعدادات الاتصال الوهمي</h3>
            <input type="text" id="caller-name-input" placeholder="أدخل اسم المتصل">
            <input type="text" id="caller-number-input" placeholder="أدخل رقم المتصل">
            <input type="number" id="time-input" placeholder="الوقت بالثواني (مثل: 10)">
            <button id="start-call-btn">جدولة الاتصال</button>
        </div>

        <div id="countdown-screen" class="screen hidden">
            <h2 id="countdown-timer">10</h2>
            <p id="countdown-message">سيبدأ الاتصال قريباً...</p>
        </div>

        <div id="call-screen" class="screen hidden">
            <div class="caller-info">
                <div class="avatar"><i class="fas fa-user"></i></div>
                <h2 id="caller-name">اسم المتصل</h2>
                <p id="caller-number">012-345-6789</p>
                <p class="call-status">مكالمة واردة...</p>
            </div>
            <div class="action-buttons">
                <button id="reject-btn" class="action-btn reject"><i class="fas fa-phone"></i></button>
                <button id="answer-btn" class="action-btn answer"><i class="fas fa-phone"></i></button>
            </div>
        </div>

        <div id="in-call-screen" class="screen hidden">
            <div class="caller-info">
                <h2 id="in-call-name">اسم المتصل</h2>
                <p id="call-timer">00:00</p>
            </div>

            <div id="in-call-grid-container">
                
                <div id="in-call-grid" class="in-call-buttons-grid">
                    <button class="grid-btn">
                        <i class="fas fa-microphone-slash"></i>
                        <span>كتم</span>
                    </button>
                    <button id="keypad-btn" class="grid-btn"> 
                        <i class="fas fa-th"></i>
                        <span>لوحة المفاتيح</span>
                    </button>
                    <button class="grid-btn">
                        <i class="fas fa-volume-up"></i>
                        <span>مكبر الصوت</span>
                    </button>
                    <button class="grid-btn">
                        <i class="fas fa-plus"></i>
                        <span>إضافة مكالمة</span>
                    </button>
                    <button class="grid-btn">
                        <i class="fas fa-video"></i>
                        <span>FaceTime</span>
                    </button>
                    <button class="grid-btn">
                        <i class="fas fa-user-friends"></i>
                        <span>جهات الاتصال</span>
                    </button>
                </div>
                
                <div id="keypad-screen" class="hidden">
                    <div class="keypad-grid">
                        <button class="keypad-btn">1<span>&nbsp;</span></button>
                        <button class="keypad-btn">2<span>ABC</span></button>
                        <button class="keypad-btn">3<span>DEF</span></button>
                        <button class="keypad-btn">4<span>GHI</span></button>
                        <button class="keypad-btn">5<span>JKL</span></button>
                        <button class="keypad-btn">6<span>MNO</span></button>
                        <button class="keypad-btn">7<span>PQRS</span></button>
                        <button class="keypad-btn">8<span>TUV</span></button>
                        <button class="keypad-btn">9<span>WXYZ</span></button>
                        <button class="keypad-btn">*</button>
                        <button class="keypad-btn">0<span>+</span></button>
                        <button class="keypad-btn">#</button>
                    </div>
                    <button id="hide-keypad-btn">إخفاء</button>
                </div>
            </div>

            <div class="end-call-container">
                <button id="end-call-btn-in-call" class="action-btn reject">
                    <i class="fas fa-phone"></i>
                </button>
            </div>
        </div>

    </div> 
    
    <audio id="ringtone" src="sams.mp3" preload="auto" loop></audio>
    <audio id="helloVoice" src="hello.mp3" preload="auto"></audio> 
    
    <script>
        let countdownInterval;
        let callTimerInterval;
        
        const setupScreen = document.getElementById('setup-screen');
        const countdownScreen = document.getElementById('countdown-screen');
        const callScreen = document.getElementById('call-screen');
        const inCallScreen = document.getElementById('in-call-screen');
        
        const startCallBtn = document.getElementById('start-call-btn');
        const nameInput = document.getElementById('caller-name-input');
        const numberInput = document.getElementById('caller-number-input');
        const timeInput = document.getElementById('time-input');
        const countdownTimer = document.getElementById('countdown-timer');
        const callerName = document.getElementById('caller-name');
        const callerNumber = document.getElementById('caller-number');
        const answerBtn = document.getElementById('answer-btn');
        const rejectBtn = document.getElementById('reject-btn');
        const inCallName = document.getElementById('in-call-name');
        const callTimerElement = document.getElementById('call-timer');
        const endCallBtnInCall = document.getElementById('end-call-btn-in-call');
        
        const inCallGrid = document.getElementById('in-call-grid');
        const keypadBtn = document.getElementById('keypad-btn');
        const keypadScreen = document.getElementById('keypad-screen');
        const hideKeypadBtn = document.getElementById('hide-keypad-btn');

        const ringtone = document.getElementById('ringtone');
        const helloVoice = document.getElementById('helloVoice');

        function showScreen(screenToShow) {
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('countdown-screen').classList.add('hidden');
            document.getElementById('call-screen').classList.add('hidden');
            document.getElementById('in-call-screen').classList.add('hidden');
            
            screenToShow.classList.remove('hidden');
        }

        startCallBtn.addEventListener('click', () => {
            const name = nameInput.value || "اسم المتصل";
            const number = numberInput.value || "012-345-6789";
            let timeInSeconds = parseInt(timeInput.value) || 5; 
            
            callerName.textContent = name;
            callerNumber.textContent = number;
            inCallName.textContent = name; 
            
            showScreen(countdownScreen);
            startCountdown(timeInSeconds);
        });

        function startCountdown(seconds) {
            let timeLeft = seconds;
            countdownTimer.textContent = timeLeft;
            countdownInterval = setInterval(() => {
                timeLeft--;
                countdownTimer.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(countdownInterval);
                    startFakeCall();
                }
            }, 1000);
        }

        function startFakeCall() {
            showScreen(callScreen);
            ringtone.play();
        }

        function stopFakeCall() {
            ringtone.pause();
            ringtone.currentTime = 0;
            helloVoice.pause();
            helloVoice.currentTime = 0;
            
            clearInterval(countdownInterval); 
            clearInterval(callTimerInterval); 
            
            callTimerElement.textContent = "00:00";
            
            keypadScreen.classList.add('hidden');
            inCallGrid.classList.remove('hidden'); 
            
            showScreen(setupScreen);
        }

        function startCallTimer() {
            let seconds = 0;
            callTimerInterval = setInterval(() => {
                seconds++;
                const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
                const secs = (seconds % 60).toString().padStart(2, '0');
                callTimerElement.textContent = `${mins}:${secs}`;
            }, 1000);
        }

        answerBtn.addEventListener('click', () => {
            ringtone.pause();
            ringtone.currentTime = 0;
            helloVoice.play();
            showScreen(inCallScreen);
            startCallTimer();
        });

        rejectBtn.addEventListener('click', () => {
            alert("تم رفض المكالمة!");
            stopFakeCall();
        });

        endCallBtnInCall.addEventListener('click', () => {
            alert("تم إنهاء المكالمة!");
            stopFakeCall();
        });
        
        keypadBtn.addEventListener('click', () => {
            inCallGrid.classList.add('hidden');
            keypadScreen.classList.remove('hidden');
        });

        hideKeypadBtn.addEventListener('click', () => {
            keypadScreen.classList.add('hidden');
            inCallGrid.classList.remove('hidden');
        });

        showScreen(setupScreen);
    </script>
</body>
</html>
